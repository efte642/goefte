{% extends "base.html" %}
{% load static %}

{% block title %}{{ tag.name }} - Goefte Magazine{% endblock %}

{% block content %}
<div class="content-container">

    <!-- Tag Page Title -->
    <section class="section-title-centered">
        <h3>Posts tagged with "{{ tag.name }}"</h3>
    </section>

    <!-- Tagged Posts Grid -->
    <section class="popular-posts-section" aria-labelledby="tag-posts-title">
        <div class="section-title">
            <h3 id="tag-posts-title">Explore Posts</h3>
        </div>

        <div class="popular-posts-grid">
            {% if tag_posts %}
                {% for post in tag_posts %}
                    <article class="popular-post-card" role="article">
                        <figure class="post-card-figure">
                            <div class="post-card-image">
                                {% if post.image %}
                                    <img src="{{ post.image.url }}" alt="{{ post.title }}">
                                {% else %}
                                    <img src="{% static 'images/default.jpg' %}" alt="Default image">
                                {% endif %}
                            </div>
                            <figcaption class="post-card-content">
                                {% if post.category %}
                                    <span class="article-category">{{ post.category.name }}</span>
                                {% endif %}
                                <a href="{% url 'blog:post_detail' post.slug %}">
                                    <h4>{{ post.title }}</h4>
                                </a>
                                {% if post.summary %}
                                    <p>{{ post.summary|truncatewords:20 }}</p>
                                {% endif %}
                                <span class="read-more-link">
                                    Read More <i class="fas fa-arrow-right"></i>
                                </span>
                            </figcaption>
                        </figure>
                    </article>
                {% endfor %}
            {% else %}
                <p>No posts found for this tag.</p>
            {% endif %}
        </div>
    </section>

    <!-- Subscribe Section -->
    <section class="subscribe-section" aria-labelledby="subscribe-title">
        <h2 id="subscribe-title">Stay Informed</h2>
        <p>Get the latest posts tagged "{{ tag.name }}" delivered to your inbox.</p>
        <form action="#" method="post">
            <label for="email-input" class="sr-only">Enter your email address</label>
            <input type="email" id="email-input" name="email" placeholder="Enter your email address" required>
            <button type="submit">SUBSCRIBE</button>
        </form>
    </section>

</div>
{% endblock %}
